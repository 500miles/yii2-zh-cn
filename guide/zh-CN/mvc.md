MVC 概览
============

Yii 采用 model(模型)-view(视图)-controller(控制器) (MVC) 框架模式，
MVC 的主要思想是将用户界面和业务逻辑分开处理，以达到提升代码的重用性
出于用户界面方面的考虑,使开发人员更容易地改变应用程序的各个组件,而不会相互间产生影响

在MVC中，*model(模型)*表示
信息(数据)和业务规则这些必须遵循的数据。*view (视图)*包含(用户界面的)元素
用户界面的(元素).例如文本,图片,和表单元素 .  *controller(控制器)* 管理着
模型与视图之间的通信，就好像中介一样。

除了实现了MVC设计模式，Yii还引入了*front-controller*(前端控制器)，叫
*application*(应用)。前端控制器封装了用以处理请求的*执行环境*。这意味着，前端控制器收集有关用户请求的信息，
这之后，将其分派到用于处理该请求的实际控制器。换句话说，前端控制器是主应用程序管理器，处理所有的请求，并下放相应的动作给其他控制器。

下图显示了一个Yii应用的静态结构：

![Yii应用的静态结构](images/structure.png)


典型的工作流程
------------------

下图展示了Yii应用如何处理用户请求的一个典型工作流程：

![典型的Yii应用程序工作流程](images/flow.png)

1. 用户发起一个访问如下URL `http://www.example.com/index.php?r=post/show&id=1` 的请求。
   Web服务器通过执行启动脚本 `index.php` 来捕获这个请求。
2. 启动脚本创建了一个 [[yii\web\Application|Application]] 的实例并运行。
3. 应用程序实例通过一个叫 `request` 的应用组件来获取这个用户请求的详细信息。
4. 应用程序确定请求的是哪个[控制器](controller.md)和哪个动作。
   这个过程通过一个名叫`urlManager`的应用程序组件来帮助完成。
   在这个例子中，控制器是`post`，他指向 `PostController` 类；动作是`show`，
   其实际意义是由控制器决定的。
5. 应用程序创建被请求的控制器的一个实例来进一步处理用户请求。
   控制器确定 `show` 这个动作指向控制器类中的名叫 `actionShow` 的方法。
   然后他创建并执行与此动作相关联的过滤器（比如访问控制，基准测试）。
   然后，如果过滤器允许执行该动作（比如用户有执行此动作的权限），此动作就被执行。
6. 动作使用底层数据表中ID值为`1`的那条记录，创建了一个`Post` [模型](model.md) 的实例。
7. 这个动作渲染了一个名叫`show`的 [视图](view.md) ，来输出展现`Post`模型实例。
8. 视图读取 `Post` 模型实例的属性，并显示这些属性的值。
9. 视图同时也执行一些[小部件](view.md#widgets)。
10. 视图渲染出最终结果－将前面几步的输出结果嵌入一个 [布局](view.md#layout)中，最终创建了一个完整的页面。
11. 到此，动作正式完成视图渲染并显示给用户。